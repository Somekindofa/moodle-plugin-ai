{"version":3,"file":"chat_interface.min.js","names":["Ajax","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","_typeof","has","get","set","_t5","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_regenerator","Symbol","iterator","toStringTag","c","prototype","Generator","u","create","_regeneratorDefine2","p","y","G","v","a","d","bind","length","l","TypeError","done","value","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","w","m","_regeneratorDefine","_invoke","enumerable","configurable","writable","_createForOfIteratorHelper","Array","isArray","_unsupportedIterableToArray","_n","F","s","next","_arrayLikeToArray","toString","slice","constructor","name","from","test","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","init","_exports","initializeChat","console","log","sendButton","document","getElementById","chatInput","messagesContainer","providerSelect","newConversationBtn","error","aiConfig","currentProvider","currentConversationThreadId","loadAIConfiguration","loadExistingConversations","showDocumentSidepanel","documentPaths","content","listHTML","concat","map","path","join","innerHTML","methodname","args","action","result","success","conversations","populateConversationsList","message","fail","conversationList","forEach","conversation","conversationItem","createElement","className","setAttribute","conversation_id","titleSpan","textContent","title","appendChild","setupConversationItemListener","config","setupProviderUI","fireworks_available","showConfigurationError","stack","errorDiv","hasAvailableProvider","fireworksOption","disabled","savedProvider","localStorage","getItem","querySelector","sendMessage","trim","createNewConversation","sendMessageWithConversation","catch","userMessageDiv","loadingDiv","provider","credentials","removeChild","sendFireworksChatMessage","contains","scrollTop","scrollHeight","_x","_x2","_sendFireworksChatMessage","_callee2","_context2","setTimeout","_callee","aiMessageDiv","responseSpan","url","options","response","aiResponse","retrievedDocuments","documentsProcessed","lastAIMessageContent","reader","decoder","_yield$reader$read","lines","_iterator","_step","line","data","document_sources","_iterator2","_step2","msg","currentAIContent","html_content","htmlContent","_t","_t2","_t3","_context","method","headers","body","JSON","stringify","fetch","ok","Error","status","statusText","getReader","TextDecoder","read","decode","stream","split","parse","documents","doc","_doc$metadata","metadata","source","type","__class__","marked","err","generateUUID","crypto","randomUUID","replace","Math","random","_createNewConversation","_callee3","conversationId","conversationTitle","newConversationItem","allItems","_t4","_context3","Date","toLocaleTimeString","querySelectorAll","item","classList","remove","add","createConversationInMoodle","_x3","_x4","_createConversationInMoodle","_callee4","_context4","reject","addEventListener","getAttribute","id","setupConversationPanel","conversationItems","key","shiftKey","preventDefault","readyState"],"sources":["../src/chat_interface.js"],"sourcesContent":["// Standard license block omitted for brevity\r\n/**\r\n * @module     block_aiassistant/chat_interface\r\n * @copyright  2025 Your Name\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport * as Ajax from 'core/ajax';\r\n\r\n/**\r\n * Initialize the AI chat interface\r\n */\r\nexport const init = () => {\r\n    // Function to initialize the chat interface\r\n    const initializeChat = () => {\r\n        console.log('AI Chat: Initializing...');\r\n\r\n        const sendButton = document.getElementById(\"ai-chat-send\");\r\n        const chatInput = document.getElementById(\"ai-chat-input\");\r\n        const messagesContainer = document.getElementById(\"ai-chat-messages\");\r\n        const providerSelect = document.getElementById(\"ai-provider-select\");\r\n        const newConversationBtn = document.getElementById(\"ai-new-conversation-btn\");\r\n\r\n        if (!sendButton || !chatInput || !messagesContainer || !providerSelect || !newConversationBtn) {\r\n            console.error('AI Chat: Required elements not found');\r\n            return;\r\n        }\r\n\r\n        // Global configuration storage\r\n        let aiConfig = null;\r\n        let currentProvider = 'fireworks';\r\n        let currentConversationThreadId = null;\r\n\r\n        // Load AI configuration on startup\r\n        loadAIConfiguration();\r\n        loadExistingConversations();\r\n\r\n        /**\r\n         * Displays a list of document paths in the sidepanel.\r\n         * Populates the sidepanel with the provided document paths.\r\n         * If no documents are provided, displays a \"No documents retrieved\" message.\r\n         * \r\n         * @param {string[]} documentPaths - Array of document file paths to display in the sidepanel\r\n         */\r\n        function showDocumentSidepanel(documentPaths) {\r\n            const content = document.getElementById('ai-sidepanel-content');\r\n\r\n            if (documentPaths && documentPaths.length > 0) {\r\n                const listHTML = `\r\n                    <ul class=\"ai-document-list\">\r\n                        ${documentPaths.map(path => `<li>${path}</li>`).join('')}\r\n                    </ul>\r\n                `;\r\n                content.innerHTML = listHTML;\r\n            } else {\r\n                content.innerHTML = '<p>No documents retrieved.</p>';\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Load existing conversations from Moodle database\r\n         */\r\n        function loadExistingConversations() {\r\n            Ajax.call([{\r\n                methodname: 'block_aiassistant_manage_conversations',\r\n                args: {\r\n                    action: 'list'\r\n                },\r\n                done: function (result) {\r\n                    if (result && result.success && result.conversations) {\r\n                        console.log('Existing conversations loaded:', result.conversations);\r\n                        populateConversationsList(result.conversations);\r\n                    } else {\r\n                        console.log('No existing conversations found or failed to load:', result ? result.message : 'No response received');\r\n                    }\r\n                },\r\n                fail: function (error) {\r\n                    console.error('Failed to load existing conversations:', error);\r\n                }\r\n            }]);\r\n        }\r\n\r\n        /**\r\n         * Populate the conversations list with existing conversations\r\n         */\r\n        function populateConversationsList(conversations) {\r\n            const conversationList = document.getElementById('ai-conversation-list');\r\n\r\n            // Clear existing items\r\n            conversationList.innerHTML = '';\r\n\r\n            // Add each conversation to the list\r\n            conversations.forEach(conversation => {\r\n                const conversationItem = document.createElement('div');\r\n                conversationItem.className = 'ai-conversation-item';\r\n                conversationItem.setAttribute('data-conversation-id', conversation.conversation_id);\r\n\r\n                const titleSpan = document.createElement('span');\r\n                titleSpan.className = 'ai-conversation-title';\r\n                titleSpan.textContent = conversation.title;\r\n\r\n                conversationItem.appendChild(titleSpan);\r\n                conversationList.appendChild(conversationItem);\r\n\r\n                // Add click listener to the item\r\n                setupConversationItemListener(conversationItem);\r\n            });\r\n\r\n            console.log(`Populated ${conversations.length} conversations in the list`);\r\n        }\r\n\r\n        /**\r\n         * Load AI configuration from backend\r\n         */\r\n        function loadAIConfiguration() {\r\n            Ajax.call([{\r\n                methodname: 'block_aiassistant_get_ai_config',\r\n                args: {},\r\n                done: function (config) {\r\n                    if (config && config.success) {\r\n                        aiConfig = config;\r\n                        console.log('AI Config loaded successfully.');\r\n                        setupProviderUI();\r\n                    } else {\r\n                        console.error('Failed to load AI configuration:', config ? config.message : 'No response received');\r\n                        aiConfig = {\r\n                            success: false,\r\n                            fireworks_available: false,\r\n                        };\r\n                        showConfigurationError('Failed to load AI configuration. Please check plugin settings.');\r\n                    }\r\n                },\r\n                fail: function (error) {\r\n                    console.error('Error details:', {\r\n                        name: error.name,\r\n                        message: error.message,\r\n                        stack: error.stack\r\n                    });\r\n                    aiConfig = {\r\n                        success: false,\r\n                        fireworks_available: false,\r\n                    };\r\n                    showConfigurationError('Could not connect to AI configuration service.');\r\n                }\r\n            }]);\r\n        }\r\n\r\n        /**\r\n         * Show configuration error in chat\r\n         */\r\n        function showConfigurationError(message) {\r\n            const errorDiv = document.createElement(\"div\");\r\n            errorDiv.className = \"ai-message\";\r\n            errorDiv.innerHTML = `<strong>AI Assistant:</strong> <em>Error: ${message}</em>`;\r\n            messagesContainer.appendChild(errorDiv);\r\n        }\r\n\r\n        /**\r\n         * Setup provider UI based on configuration\r\n         */\r\n        function setupProviderUI() {\r\n            // Ensure aiConfig exists before proceeding\r\n            if (!aiConfig) {\r\n                console.error('AI configuration not loaded, cannot setup provider UI');\r\n                return;\r\n            }\r\n            // Clear existing options\r\n            providerSelect.innerHTML = '';\r\n\r\n            let hasAvailableProvider = false;\r\n\r\n            // Add available providers\r\n            if (aiConfig && aiConfig.fireworks_available) {\r\n                const fireworksOption = document.createElement('option');\r\n                fireworksOption.value = 'fireworks';\r\n                fireworksOption.textContent = 'Fireworks.ai';\r\n                providerSelect.appendChild(fireworksOption);\r\n                hasAvailableProvider = true;\r\n            }\r\n\r\n            // If no providers are available, add disabled options\r\n            if (!hasAvailableProvider) {\r\n                if (!aiConfig || !aiConfig.fireworks_available) {\r\n                    const fireworksOption = document.createElement('option');\r\n                    fireworksOption.value = 'fireworks';\r\n                    fireworksOption.textContent = 'Fireworks.ai (Not configured)';\r\n                    fireworksOption.disabled = true;\r\n                    providerSelect.appendChild(fireworksOption);\r\n                }\r\n\r\n                showConfigurationError('No AI providers are configured. Please check plugin settings.');\r\n                return;\r\n            }\r\n\r\n            // Restore saved selections\r\n            const savedProvider = localStorage.getItem('ai-chat-provider');\r\n\r\n            if (savedProvider && document.querySelector(`option[value=\"${savedProvider}\"]`)) {\r\n                providerSelect.value = savedProvider;\r\n                currentProvider = savedProvider;\r\n            } else if (aiConfig && aiConfig.fireworks_available) {\r\n                currentProvider = 'fireworks';\r\n                providerSelect.value = 'fireworks';\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Send a message to the AI assistant\r\n         */\r\n        function sendMessage() {\r\n            const message = chatInput.value.trim();\r\n            if (!message) {\r\n                return;\r\n            }\r\n\r\n            // Check if we have a valid configuration\r\n            if (!aiConfig || !aiConfig.fireworks_available) {\r\n                showConfigurationError('No AI providers are configured. Please check plugin settings.');\r\n                return;\r\n            }\r\n\r\n            // If no conversation is selected, create a new one\r\n            if (!currentConversationThreadId) {\r\n                createNewConversation().then(() => {\r\n                    // After creating conversation, send the message\r\n                    sendMessageWithConversation(message, currentConversationThreadId);\r\n                }).catch(error => {\r\n                    console.error('Failed to create new conversation:', error);\r\n                    showConfigurationError('Failed to create new conversation. Please try again.');\r\n                });\r\n                return;\r\n            }\r\n\r\n            sendMessageWithConversation(message, currentConversationThreadId);\r\n        }\r\n\r\n        /**\r\n         * Send message with existing conversation\r\n         */\r\n        function sendMessageWithConversation(message, currentConversationThreadId) {\r\n            // Add user message\r\n            const userMessageDiv = document.createElement(\"div\");\r\n            userMessageDiv.className = \"user-message\";\r\n            userMessageDiv.innerHTML = \"<strong>You:</strong> \" + message;\r\n            messagesContainer.appendChild(userMessageDiv);\r\n\r\n            // Clear input\r\n            chatInput.value = \"\";\r\n\r\n            // Show loading state\r\n            const loadingDiv = document.createElement(\"div\");\r\n            loadingDiv.className = \"ai-message\";\r\n            loadingDiv.innerHTML = `<strong>AI Assistant:</strong> <em>Getting your credentials for ${currentProvider}...</em>`;\r\n            messagesContainer.appendChild(loadingDiv);\r\n\r\n            // Get user credentials via AJAX\r\n            Ajax.call([{\r\n                methodname: 'block_aiassistant_get_user_credentials',\r\n                args: { provider: currentProvider },\r\n                done: function (credentials) {\r\n                    // Remove loading message\r\n                    messagesContainer.removeChild(loadingDiv);\r\n\r\n                    if (credentials.success) {\r\n                        sendFireworksChatMessage(message, currentConversationThreadId);\r\n                    } else {\r\n                        const errorDiv = document.createElement(\"div\");\r\n                        errorDiv.className = \"ai-message\";\r\n                        errorDiv.innerHTML = \"<strong>AI Assistant:</strong> <em>Error: \" + credentials.message + \"</em>\";\r\n                        messagesContainer.appendChild(errorDiv);\r\n                    }\r\n                },\r\n                fail: function (error) {\r\n                    // Remove loading message\r\n                    if (messagesContainer.contains(loadingDiv)) {\r\n                        messagesContainer.removeChild(loadingDiv);\r\n                    }\r\n\r\n                    const errorDiv = document.createElement(\"div\");\r\n                    errorDiv.className = \"ai-message\";\r\n                    errorDiv.innerHTML = \"<strong>AI Assistant:</strong> <em>Failed to get credentials: \" +\r\n                        (error.message || 'Unknown error') + \"</em>\";\r\n                    messagesContainer.appendChild(errorDiv);\r\n                }\r\n            }]);\r\n\r\n            // Scroll to bottom\r\n            messagesContainer.scrollTop = messagesContainer.scrollHeight;\r\n        }\r\n\r\n        /**\r\n         * Send chat message to Fireworks API (Direct API approach)\r\n         * @param {string} message - The message to send\r\n         */\r\n        async function sendFireworksChatMessage(message, currentConversationThreadId) {\r\n            setTimeout(async function () {\r\n                const aiMessageDiv = document.createElement(\"div\");\r\n                aiMessageDiv.className = \"ai-message\";\r\n                aiMessageDiv.innerHTML = \"<strong>AI Assistant (Fireworks):</strong> <span class='response-text'></span>\";\r\n                messagesContainer.appendChild(aiMessageDiv);\r\n                const responseSpan = aiMessageDiv.querySelector('.response-text');\r\n\r\n                const url = 'http://127.0.0.1:8000/api/chat';\r\n                const options = {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({\r\n                        \"message\": message,\r\n                        \"conversation_thread_id\": currentConversationThreadId\r\n                    })\r\n                };\r\n\r\n                try {\r\n                    const response = await fetch(url, options);\r\n\r\n                    if (!response.ok) {\r\n                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n                    }\r\n                    // Handle Server-Sent Events (SSE) response\r\n                    let aiResponse = '';\r\n                    let retrievedDocuments = [];\r\n                    let documentsProcessed = false;\r\n                    let lastAIMessageContent = \"\";\r\n                    const reader = response.body.getReader();\r\n                    const decoder = new TextDecoder();\r\n\r\n                    while (true) {\r\n                        const { done, value } = await reader.read();\r\n                        if (done) break;\r\n\r\n                        const lines = decoder.decode(value, { stream: true }).split('\\n');\r\n                        for (const line of lines) {\r\n                            if (!line.trim()) continue;\r\n                            try {\r\n                                const data = JSON.parse(line);\r\n                                if (data.content === '[DONE]') break;\r\n\r\n                                // Handle documents (process once when available)\r\n                                if (data.documents && Array.isArray(data.documents) && data.documents.length > 0 && !documentsProcessed) {\r\n                                    const document_sources = data.documents.map(doc => {\r\n                                        return doc.metadata?.source || 'Unknown source';\r\n                                    });\r\n                                    showDocumentSidepanel(document_sources);\r\n                                    retrievedDocuments = document_sources;\r\n                                    documentsProcessed = true;\r\n                                }\r\n\r\n                                // Handle content from stream_mode=\"values\" (array of messages)\r\n                                if (data.content && Array.isArray(data.content)) {\r\n                                    // Find the latest AI message in the messages array\r\n                                    for (const msg of data.content) {\r\n                                        // Check for AIMessage type and extract content\r\n                                        if (msg.content && (msg.type === 'ai' || msg.__class__ === 'AIMessage' || typeof msg.content === 'string')) {\r\n                                            const currentAIContent = msg.content;\r\n                                            // Only update if the AI message content has changed\r\n                                            if (currentAIContent !== lastAIMessageContent) {\r\n                                                aiResponse = currentAIContent; // Replace with latest complete AI message\r\n                                                responseSpan.textContent = aiResponse;\r\n                                                messagesContainer.scrollTop = messagesContainer.scrollHeight;\r\n\r\n                                                // Convert markdown to HTML if marked is available\r\n                                                if (typeof marked !== 'undefined' && marked.parse) {\r\n                                                    const html_content = marked.parse(responseSpan.textContent);\r\n                                                    responseSpan.innerHTML = html_content;\r\n                                                }\r\n\r\n                                                lastAIMessageContent = currentAIContent;\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                                // Fallback for stream_mode=\"messages\" (direct string content)\r\n                                else if (data.content && typeof data.content === 'string') {\r\n                                    aiResponse += data.content;\r\n                                    responseSpan.textContent = aiResponse;\r\n                                    messagesContainer.scrollTop = messagesContainer.scrollHeight;\r\n\r\n                                    if (typeof marked !== 'undefined' && marked.parse) {\r\n                                        const htmlContent = marked.parse(responseSpan.textContent);\r\n                                        responseSpan.innerHTML = htmlContent;\r\n                                    }\r\n                                }\r\n\r\n                                if (data.error) throw new Error(data.error);\r\n                            } catch (e) {\r\n                                console.error('Parse error:', e);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                } catch (error) {\r\n                    console.error('FastAPI call failed:', error);\r\n                    responseSpan.textContent = 'Sorry, there was an error processing your request: ' + error.message;\r\n                }\r\n\r\n                // Final scroll to bottom\r\n                messagesContainer.scrollTop = messagesContainer.scrollHeight;\r\n            }, 1000);\r\n        }\r\n\r\n        /**\r\n         * Generate a UUID for new conversations\r\n         */\r\n        function generateUUID() {\r\n            if (typeof crypto !== 'undefined' && crypto.randomUUID) {\r\n                return crypto.randomUUID();\r\n            }\r\n            // Fallback UUID generation for older browsers\r\n            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n                const r = Math.random() * 16 | 0;\r\n                const v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n                return v.toString(16);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Create a new conversation\r\n         */\r\n        async function createNewConversation() {\r\n            const conversationId = generateUUID();\r\n            const conversationTitle = `New Conversation ${new Date().toLocaleTimeString()}`;\r\n\r\n            // Create new conversation DOM element\r\n            const conversationList = document.getElementById('ai-conversation-list');\r\n            const newConversationItem = document.createElement('div');\r\n            newConversationItem.className = 'ai-conversation-item';\r\n            newConversationItem.setAttribute('data-conversation-id', conversationId);\r\n\r\n            const titleSpan = document.createElement('span');\r\n            titleSpan.className = 'ai-conversation-title';\r\n            titleSpan.textContent = conversationTitle;\r\n\r\n            newConversationItem.appendChild(titleSpan);\r\n            conversationList.appendChild(newConversationItem);\r\n\r\n            // Remove active class from all items and set this one as active\r\n            const allItems = document.querySelectorAll('.ai-conversation-item');\r\n            allItems.forEach(item => item.classList.remove('active'));\r\n            newConversationItem.classList.add('active');\r\n\r\n            // Set as current conversation\r\n            currentConversationThreadId = conversationId;\r\n\r\n            // Clear chat messages\r\n            messagesContainer.innerHTML = '<div class=\"ai-message\"><strong>AI Assistant:</strong> Hello! How can I help you today?</div>';\r\n\r\n            // Add click listener to the new item\r\n            setupConversationItemListener(newConversationItem);\r\n\r\n            // Create conversation in Moodle database\r\n            try {\r\n                await createConversationInMoodle(conversationId, conversationTitle);\r\n                console.log('New conversation created:', conversationId);\r\n            } catch (error) {\r\n                console.error('Failed to create conversation in Moodle:', error);\r\n                const errorDiv = document.createElement(\"div\");\r\n                errorDiv.className = \"ai-message\";\r\n                errorDiv.innerHTML = `<strong>AI Assistant:</strong> <em>Warning: Could not save conversation. Messages may not be saved.</em>`;\r\n                messagesContainer.appendChild(errorDiv);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Create conversation in Moodle database via Ajax\r\n         */\r\n        async function createConversationInMoodle(conversationId, conversationTitle) {\r\n            return new Promise((resolve, reject) => {\r\n                Ajax.call([{\r\n                    methodname: 'block_aiassistant_manage_conversations',\r\n                    args: {\r\n                        action: 'create',\r\n                        conversation_id: conversationId,\r\n                        title: conversationTitle\r\n                    },\r\n                    done: function (result) {\r\n                        if (result.success) {\r\n                            resolve(result);\r\n                        } else {\r\n                            reject(new Error(result.message || 'Failed to create conversation'));\r\n                        }\r\n                    },\r\n                    fail: function (error) {\r\n                        reject(error);\r\n                    }\r\n                }]);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Setup event listener for a single conversation item\r\n         */\r\n        function setupConversationItemListener(item) {\r\n            item.addEventListener('click', function () {\r\n                // Remove active class from all items\r\n                const allItems = document.querySelectorAll('.ai-conversation-item');\r\n                allItems.forEach(i => i.classList.remove('active'));\r\n\r\n                // Add active class to clicked item\r\n                this.classList.add('active');\r\n\r\n                // Get conversation data\r\n                const conversationId = this.getAttribute('data-conversation-id');\r\n                const conversationTitle = this.querySelector('.ai-conversation-title').textContent;\r\n\r\n                // Set as current conversation\r\n                currentConversationThreadId = conversationId;\r\n\r\n                console.log('Conversation selected:', {\r\n                    id: conversationId,\r\n                    title: conversationTitle\r\n                });\r\n\r\n                // Clear messages and show welcome message for this conversation\r\n                messagesContainer.innerHTML = '<div class=\"ai-message\"><strong>AI Assistant:</strong> Hello! How can I help you today?</div>';\r\n            });\r\n        }\r\n\r\n        // Setup conversation panel event listeners\r\n        setupConversationPanel();\r\n\r\n        // Add event listeners\r\n        newConversationBtn.addEventListener('click', createNewConversation);\r\n        sendButton.addEventListener(\"click\", sendMessage);\r\n\r\n        /**\r\n         * Setup conversation panel functionality\r\n         */\r\n        function setupConversationPanel() {\r\n            const conversationItems = document.querySelectorAll('.ai-conversation-item');\r\n\r\n            conversationItems.forEach(item => {\r\n                setupConversationItemListener(item);\r\n            });\r\n        }\r\n        chatInput.addEventListener(\"keypress\", function (e) {\r\n            if (e.key === \"Enter\" && !e.shiftKey) {\r\n                e.preventDefault();\r\n                sendMessage();\r\n            }\r\n        });\r\n    };\r\n\r\n    // Try to initialize immediately if DOM is ready, otherwise wait for DOMContentLoaded\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', initializeChat);\r\n    } else {\r\n        // DOM is already loaded, initialize immediately\r\n        initializeChat();\r\n    }\r\n};"],"mappings":"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","ignoreList":[]}