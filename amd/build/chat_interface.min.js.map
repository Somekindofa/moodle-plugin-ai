{"version":3,"file":"chat_interface.min.js","names":["Ajax","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","_typeof","has","get","set","_t4","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_regenerator","Symbol","iterator","toStringTag","c","prototype","Generator","u","create","_regeneratorDefine2","p","y","G","v","a","d","bind","length","l","TypeError","done","value","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","w","m","_regeneratorDefine","_invoke","enumerable","configurable","writable","_createForOfIteratorHelper","Array","isArray","_unsupportedIterableToArray","_n","F","s","next","_arrayLikeToArray","toString","slice","constructor","name","from","test","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","conversationHistory","init","_exports","initializeChat","console","log","sendButton","document","getElementById","chatInput","messagesContainer","chatContainer","resizeHandle","providerSelect","error","aiConfig","currentProvider","loadAIConfiguration","showDocumentSidepanel","documentPaths","sidepanel","content","listHTML","concat","map","path","join","innerHTML","style","display","setTimeout","classList","add","hideDocumentSidepanel","remove","addEventListener","closeButton","methodname","args","config","success","setupProviderUI","message","fireworks_available","showConfigurationError","fail","stack","errorDiv","createElement","className","appendChild","hasAvailableProvider","fireworksOption","textContent","disabled","savedProvider","localStorage","getItem","querySelector","sendMessage","trim","userMessageDiv","loadingDiv","provider","credentials","removeChild","sendFireworksChatMessage","api_key","contains","scrollTop","scrollHeight","_x","_sendFireworksChatMessage","_callee2","_context2","_callee","aiMessageDiv","responseSpan","url","options","response","aiResponse","reader","decoder","_yield$reader$read","lines","_iterator","_step","line","data","htmlContent","_t","_t2","_t3","_context","method","headers","body","JSON","stringify","fetch","ok","Error","status","statusText","getReader","TextDecoder","read","decode","stream","split","parse","marked","push","role","setupConversationPanel","conversationItems","querySelectorAll","forEach","item","conversationId","getAttribute","conversationTitle","id","title","key","shiftKey","preventDefault","sidepanel_toggle","readyState"],"sources":["../src/chat_interface.js"],"sourcesContent":["// Standard license block omitted for brevity\n/**\n * @module     block_aiassistant/chat_interface\n * @copyright  2025 Your Name\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Ajax from 'core/ajax';\n\nlet conversationHistory = [];\n\n/**\n * Initialize the AI chat interface\n */\nexport const init = () => {\n    // Function to initialize the chat interface\n    const initializeChat = () => {\n        console.log('AI Chat: Initializing...');\n        \n        const sendButton = document.getElementById(\"ai-chat-send\");\n        const chatInput = document.getElementById(\"ai-chat-input\");\n        const messagesContainer = document.getElementById(\"ai-chat-messages\");\n        const chatContainer = document.getElementById(\"ai-chat-container\");\n        const resizeHandle = document.getElementById(\"ai-resize-handle\");\n        const providerSelect = document.getElementById(\"ai-provider-select\");\n\n        if (!sendButton || !chatInput || !messagesContainer || !providerSelect) {\n            console.error('AI Chat: Required elements not found');\n            return;\n        }\n\n        // Global configuration storage\n        let aiConfig = null;\n        let currentProvider = 'fireworks';\n\n        // Load AI configuration on startup\n        loadAIConfiguration();\n\n        \n        /**\n         * Displays a sidepanel containing a list of document paths.\n         * Shows the sidepanel with a smooth animation and populates it with the provided document paths.\n         * If no documents are provided, displays a \"No documents retrieved\" message.\n         * \n         * @param {string[]} documentPaths - Array of document file paths to display in the sidepanel\n         */\n        function showDocumentSidepanel(documentPaths) {\n            const sidepanel = document.getElementById('ai-sidepanel');\n            const content = document.getElementById('ai-sidepanel-content');\n            \n            if (documentPaths && documentPaths.length > 0) {\n                const listHTML = `\n                    <ul class=\"ai-document-list\">\n                        ${documentPaths.map(path => `<li>${path}</li>`).join('')}\n                    </ul>\n                `;\n                content.innerHTML = listHTML;\n            } else {\n                content.innerHTML = '<p>No documents retrieved.</p>';\n            }\n            \n            sidepanel.style.display = 'block';\n            setTimeout(() => sidepanel.classList.add('active'), 10);\n        }\n        \n        /**\n         * Hides the document sidepanel by removing the 'active' class and setting display to 'none' after a delay.\n         * The function first removes the 'active' class from the AI sidepanel element, then waits 300ms\n         * before completely hiding the element by setting its display style to 'none'.\n         * \n         * @function hideDocumentSidepanel\n         * @returns {void}\n         */\n        function hideDocumentSidepanel() {\n            const sidepanel = document.getElementById('ai-sidepanel');\n            sidepanel.classList.remove('active');\n            setTimeout(() => sidepanel.style.display = 'none', 300);\n        }\n        \n        document.addEventListener('DOMContentLoaded', function() {\n            const closeButton = document.getElementById('ai-sidepanel-close');\n            if (closeButton) {\n                closeButton.addEventListener('click', hideDocumentSidepanel);\n            }\n        });\n        \n        /**\n         * Load AI configuration from backend\n         */\n        function loadAIConfiguration() {\n            Ajax.call([{\n                methodname: 'block_aiassistant_get_ai_config',\n                args: {},\n                done: function(config) {\n                    if (config && config.success) {\n                        aiConfig = config;\n                        console.log('AI Config loaded successfully:', aiConfig);\n                        setupProviderUI();\n                    } else {\n                        console.error('Failed to load AI configuration:', config ? config.message : 'No response received');\n                        aiConfig = {\n                            success: false,\n                            fireworks_available: false,\n                        };\n                        showConfigurationError('Failed to load AI configuration. Please check plugin settings.');\n                    }\n                },\n                fail: function(error) {\n                    console.error('Error details:', {\n                        name: error.name,\n                        message: error.message,\n                        stack: error.stack\n                    });\n                    aiConfig = {\n                        success: false,\n                        fireworks_available: false,\n                    };\n                    showConfigurationError('Could not connect to AI configuration service.');\n                }\n            }]);\n        }\n\n        /**\n         * Show configuration error in chat\n         */\n        function showConfigurationError(message) {\n            const errorDiv = document.createElement(\"div\");\n            errorDiv.className = \"ai-message\";\n            errorDiv.innerHTML = `<strong>AI Assistant:</strong> <em>Error: ${message}</em>`;\n            messagesContainer.appendChild(errorDiv);\n        }\n\n        /**\n         * Setup provider UI based on configuration\n         */\n        function setupProviderUI() {\n            // Ensure aiConfig exists before proceeding\n            if (!aiConfig) {\n                console.error('AI configuration not loaded, cannot setup provider UI');\n                return;\n            }\n            // Clear existing options\n            providerSelect.innerHTML = '';\n\n            let hasAvailableProvider = false;\n\n            // Add available providers\n            if (aiConfig && aiConfig.fireworks_available) {\n                const fireworksOption = document.createElement('option');\n                fireworksOption.value = 'fireworks';\n                fireworksOption.textContent = 'Fireworks.ai';\n                providerSelect.appendChild(fireworksOption);\n                hasAvailableProvider = true;\n            }\n\n            // If no providers are available, add disabled options\n            if (!hasAvailableProvider) {\n                if (!aiConfig || !aiConfig.fireworks_available) {\n                    const fireworksOption = document.createElement('option');\n                    fireworksOption.value = 'fireworks';\n                    fireworksOption.textContent = 'Fireworks.ai (Not configured)';\n                    fireworksOption.disabled = true;\n                    providerSelect.appendChild(fireworksOption);\n                }\n                \n                showConfigurationError('No AI providers are configured. Please check plugin settings.');\n                return;\n            }\n\n            // Restore saved selections\n            const savedProvider = localStorage.getItem('ai-chat-provider');\n\n            if (savedProvider && document.querySelector(`option[value=\"${savedProvider}\"]`)) {\n                providerSelect.value = savedProvider;\n                currentProvider = savedProvider;\n            } else if (aiConfig && aiConfig.fireworks_available) {\n                currentProvider = 'fireworks';\n                providerSelect.value = 'fireworks';\n            }\n        }\n\n        /**\n         * Send a message to the AI assistant\n         */\n        function sendMessage() {\n            const message = chatInput.value.trim();\n            if (!message) {\n                return;\n            }\n\n            // Check if we have a valid configuration\n            if (!aiConfig || !aiConfig.fireworks_available) {\n                showConfigurationError('No AI providers are configured. Please check plugin settings.');\n                return;\n            }\n\n            // Add user message\n            const userMessageDiv = document.createElement(\"div\");\n            userMessageDiv.className = \"user-message\";\n            userMessageDiv.innerHTML = \"<strong>You:</strong> \" + message;\n            messagesContainer.appendChild(userMessageDiv);\n\n            // Clear input\n            chatInput.value = \"\";\n\n            // Show loading state\n            const loadingDiv = document.createElement(\"div\");\n            loadingDiv.className = \"ai-message\";\n            loadingDiv.innerHTML = `<strong>AI Assistant:</strong> <em>Getting your credentials for ${currentProvider}...</em>`;\n            messagesContainer.appendChild(loadingDiv);\n\n            // Get user credentials via AJAX\n            Ajax.call([{\n                methodname: 'block_aiassistant_get_user_credentials',\n                args: { provider: currentProvider },\n                done: function(credentials) {\n                    // Remove loading message\n                    messagesContainer.removeChild(loadingDiv);\n\n                    if (credentials.success) {\n                        sendFireworksChatMessage(message, credentials.api_key);\n                    } else {\n                        const errorDiv = document.createElement(\"div\");\n                        errorDiv.className = \"ai-message\";\n                        errorDiv.innerHTML = \"<strong>AI Assistant:</strong> <em>Error: \" + credentials.message + \"</em>\";\n                        messagesContainer.appendChild(errorDiv);\n                    }\n                },\n                fail: function(error) {\n                    // Remove loading message\n                    if (messagesContainer.contains(loadingDiv)) {\n                        messagesContainer.removeChild(loadingDiv);\n                    }\n\n                    const errorDiv = document.createElement(\"div\");\n                    errorDiv.className = \"ai-message\";\n                    errorDiv.innerHTML = \"<strong>AI Assistant:</strong> <em>Failed to get credentials: \" +\n                        (error.message || 'Unknown error') + \"</em>\";\n                    messagesContainer.appendChild(errorDiv);\n                }\n            }]);\n\n            // Scroll to bottom\n            messagesContainer.scrollTop = messagesContainer.scrollHeight;\n        }\n\n        /**\n         * Send chat message to Fireworks API (Direct API approach)\n         * @param {string} message - The message to send\n         */\n        async function sendFireworksChatMessage(message) {\n            setTimeout(async function() {\n                const aiMessageDiv = document.createElement(\"div\");\n                aiMessageDiv.className = \"ai-message\";\n                aiMessageDiv.innerHTML = \"<strong>AI Assistant (Fireworks):</strong> <span class='response-text'></span>\";\n                messagesContainer.appendChild(aiMessageDiv);\n                const responseSpan = aiMessageDiv.querySelector('.response-text');\n                \n                const url = 'http://127.0.0.1:8000/api/chat'; // Adjust\n                const options = {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        \"message\": message,\n                    })\n                };\n\n                try {\n                    const response = await fetch(url, options);\n                    \n                    if (!response.ok) {\n                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n                    }\n                    // Handle Server-Sent Events (SSE) response\n                    let aiResponse = '';\n                    const reader = response.body.getReader();\n                    const decoder = new TextDecoder();\n                \n                    while (true) {\n                        const { done, value } = await reader.read();\n                        if (done) break;\n                        \n                        const lines = decoder.decode(value, { stream: true }).split('\\n');\n                        for (const line of lines) {\n                            if (!line.trim()) continue;\n                            try {\n                                const data = JSON.parse(line);\n                                if (data.content === '[DONE]') break;\n                                if (data.content) {\n                                    aiResponse += data.content;\n                                    responseSpan.textContent = aiResponse;\n                                    messagesContainer.scrollTop = messagesContainer.scrollHeight;\n                                    \n                                    // Convert final markdown to HTML if marked is available\n                                    if (typeof marked !== 'undefined' && marked.parse) {\n                                        const htmlContent = marked.parse(responseSpan.textContent);\n                                        responseSpan.innerHTML = htmlContent;\n                                    }\n                                } \n                                if (data.error) throw new Error(data.error);\n                            } catch (e) {\n                                console.error('Parse error:', e);\n                            }\n                        }\n                    }\n\n                    // Update conversation history\n                    conversationHistory.push(\n                        { role: \"user\", content: message },\n                        { role: \"assistant\", content: aiResponse }\n                    );\n\n                } catch (error) {\n                    console.error('FastAPI call failed:', error);\n                    responseSpan.textContent = 'Sorry, there was an error processing your request: ' + error.message;\n                }\n\n                // Final scroll to bottom\n                messagesContainer.scrollTop = messagesContainer.scrollHeight;\n            }, 1000);\n        }\n\n        // Setup conversation panel event listeners\n        setupConversationPanel();\n\n        sendButton.addEventListener(\"click\", sendMessage);\n        \n        /**\n         * Setup conversation panel functionality\n         */\n        function setupConversationPanel() {\n            const conversationItems = document.querySelectorAll('.ai-conversation-item');\n            \n            conversationItems.forEach(item => {\n                item.addEventListener('click', function() {\n                    // Remove active class from all items\n                    conversationItems.forEach(i => i.classList.remove('active'));\n                    \n                    // Add active class to clicked item\n                    this.classList.add('active');\n                    \n                    // Get conversation data\n                    const conversationId = this.getAttribute('data-conversation-id');\n                    const conversationTitle = this.querySelector('.ai-conversation-title').textContent;\n                    \n                    console.log('Conversation clicked:', {\n                        id: conversationId,\n                        title: conversationTitle\n                    });\n                    \n                    // For now, just log the action - no backend integration\n                    // In the future, this would load the selected conversation\n                });\n            });\n        }\n        chatInput.addEventListener(\"keypress\", function(e) {\n            if (e.key === \"Enter\" && !e.shiftKey) {\n                e.preventDefault();\n                sendMessage();\n            }\n        });\n        const sidepanel_toggle = document.getElementById('ai-sidepanel-toggle');\n        if (sidepanel_toggle) {\n            sidepanel_toggle.addEventListener('click', function() {\n                const sidepanel = document.getElementById('ai-sidepanel');\n                if (sidepanel.classList.contains('active')) {\n                    hideDocumentSidepanel();\n                    sidepanel_toggle.classList.remove('active');\n                } else {\n                    showDocumentSidepanel([\n                        '/path/to/document1.pdf'\n                    ]);\n                    sidepanel_toggle.classList.add('active');\n                }\n            });\n        }\n    };\n\n    // Try to initialize immediately if DOM is ready, otherwise wait for DOMContentLoaded\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', initializeChat);\n    } else {\n        // DOM is already loaded, initialize immediately\n        initializeChat();\n    }\n};"],"mappings":"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","ignoreList":[]}