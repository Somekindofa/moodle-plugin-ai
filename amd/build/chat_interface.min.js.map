{"version":3,"file":"chat_interface.min.js","names":["Ajax","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","_typeof","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_regenerator","Symbol","iterator","toStringTag","c","prototype","Generator","u","create","_regeneratorDefine2","p","y","G","v","a","d","bind","length","l","TypeError","done","value","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","w","m","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","init","_exports","initializeChat","console","log","sendButton","document","getElementById","chatInput","messagesContainer","chatContainer","resizeHandle","error","savedWidth","localStorage","getItem","savedHeight","style","width","height","isResizing","startX","startY","startWidth","startHeight","addEventListener","classList","add","clientX","clientY","parseInt","window","getComputedStyle","preventDefault","newWidth","Math","max","min","newHeight","setItem","remove","sendMessage","message","trim","userMessageDiv","createElement","className","innerHTML","appendChild","loadingDiv","methodname","args","credentials","removeChild","success","sendChatMessage","api_key","errorDiv","fail","scrollTop","scrollHeight","_x","_x2","_sendChatMessage","_callee2","apiKey","_context2","setTimeout","_callee","aiMessageDiv","responseSpan","url","options","response","data","content","thinkPatterns","_i","_thinkPatterns","pattern","endIndex","htmlContent","_t","_context","querySelector","method","headers","Authorization","body","JSON","stringify","fetch","json","choices","indexOf","substring","marked","parse","textContent","key","shiftKey","readyState"],"sources":["../src/chat_interface.js"],"sourcesContent":["// Standard license block omitted for brevity\n/**\n * @module     block_aiassistant/chat_interface\n * @copyright  2025 Your Name\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Ajax from 'core/ajax';\n\n/**\n * Initialize the AI chat interface\n */\nexport const init = () => {\n    // Function to initialize the chat interface\n    const initializeChat = () => {\n        console.log('AI Chat: Initializing...');\n        \n        const sendButton = document.getElementById(\"ai-chat-send\");\n        const chatInput = document.getElementById(\"ai-chat-input\");\n        const messagesContainer = document.getElementById(\"ai-chat-messages\");\n        const chatContainer = document.getElementById(\"ai-chat-container\");\n        const resizeHandle = document.getElementById(\"ai-resize-handle\");\n\n        console.log('AI Chat: Elements found:', {\n            sendButton: !!sendButton,\n            chatInput: !!chatInput,\n            messagesContainer: !!messagesContainer,\n            chatContainer: !!chatContainer,\n            resizeHandle: !!resizeHandle\n        });\n\n        if (!sendButton || !chatInput || !messagesContainer) {\n            console.error('AI Chat: Required elements not found');\n            return;\n        }\n\n        // Load saved dimensions from localStorage\n        const savedWidth = localStorage.getItem('ai-chat-width');\n        const savedHeight = localStorage.getItem('ai-chat-height');\n\n        if (savedWidth) {\n            chatContainer.style.width = savedWidth + 'px';\n        }\n        if (savedHeight) {\n            messagesContainer.style.height = savedHeight + 'px';\n        }\n\n        // Resize functionality\n        let isResizing = false;\n        let startX, startY, startWidth, startHeight;\n\n        resizeHandle.addEventListener('mousedown', function(e) {\n            isResizing = true;\n            chatContainer.classList.add('resizing');\n            startX = e.clientX;\n            startY = e.clientY;\n            startWidth = parseInt(window.getComputedStyle(chatContainer).width, 10);\n            startHeight = parseInt(window.getComputedStyle(messagesContainer).height, 10);\n            e.preventDefault();\n        });\n\n        document.addEventListener('mousemove', function(e) {\n            if (!isResizing) {\n                return;\n            }\n            const newWidth = Math.max(300, Math.min(800, startWidth + (e.clientX - startX)));\n            const newHeight = Math.max(150, Math.min(600, startHeight + (e.clientY - startY)));\n            chatContainer.style.width = newWidth + 'px';\n            messagesContainer.style.height = newHeight + 'px';\n            // Save to localStorage\n            localStorage.setItem('ai-chat-width', newWidth);\n            localStorage.setItem('ai-chat-height', newHeight);\n        });\n\n        document.addEventListener('mouseup', function() {\n            if (isResizing) {\n                isResizing = false;\n                chatContainer.classList.remove('resizing');\n            }\n        });\n\n        /**\n         * Send a message to the AI assistant\n         */\n        function sendMessage() {\n            const message = chatInput.value.trim();\n            if (!message) {\n                return;\n            }\n\n            // Add user message\n            const userMessageDiv = document.createElement(\"div\");\n            userMessageDiv.className = \"user-message\";\n            userMessageDiv.innerHTML = \"<strong>You:</strong> \" + message;\n            messagesContainer.appendChild(userMessageDiv);\n\n            // Clear input\n            chatInput.value = \"\";\n\n            // Show loading state\n            const loadingDiv = document.createElement(\"div\");\n            loadingDiv.className = \"ai-message\";\n            loadingDiv.innerHTML = \"<strong>AI Assistant:</strong> <em>Getting your credentials...</em>\";\n            messagesContainer.appendChild(loadingDiv);\n\n            // Get user credentials via AJAX\n            Ajax.call([{\n                methodname: 'block_aiassistant_get_user_credentials',\n                args: {},\n                done: function(credentials) {\n                    // Remove loading message\n                    messagesContainer.removeChild(loadingDiv);\n\n                    if (credentials.success) {\n                        // Now make the actual chat request using those credentials\n                        sendChatMessage(message, credentials.api_key);\n                    } else {\n                        const errorDiv = document.createElement(\"div\");\n                        errorDiv.className = \"ai-message\";\n                        errorDiv.innerHTML = \"<strong>AI Assistant:</strong> <em>Error: \" + credentials.message + \"</em>\";\n                        messagesContainer.appendChild(errorDiv);\n                    }\n                },\n                fail: function(error) {\n                    // Remove loading message\n                    messagesContainer.removeChild(loadingDiv);\n\n                    const errorDiv = document.createElement(\"div\");\n                    errorDiv.className = \"ai-message\";\n                    errorDiv.innerHTML = \"<strong>AI Assistant:</strong> <em>Failed to get credentials: \" +\n                        error.message + \"</em>\";\n                    messagesContainer.appendChild(errorDiv);\n                }\n            }]);\n\n            // Scroll to bottom\n            messagesContainer.scrollTop = messagesContainer.scrollHeight;\n        }\n\n        /**\n         * Send chat message to AI API\n         * @param {string} message - The message to send\n         * @param {string} apiKey - The API key for authentication\n         */\n        async function sendChatMessage(message, apiKey) {\n            setTimeout(async function() {\n                const aiMessageDiv = document.createElement(\"div\");\n                aiMessageDiv.className = \"ai-message\";\n                aiMessageDiv.innerHTML = \"<strong>AI Assistant:</strong> <span class='response-text'>Thinking...</span>\";\n                messagesContainer.appendChild(aiMessageDiv);\n                const responseSpan = aiMessageDiv.querySelector('.response-text');\n                const url = 'https://api.fireworks.ai/inference/v1/chat/completions';\n                const options = {\n                    method: 'POST',\n                    headers: {\n                        Authorization: 'Bearer ' + apiKey,\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        \"max_tokens\": 2000,\n                        \"prompt_truncate_len\": 1500,\n                        \"temperature\": 1,\n                        \"top_p\": 1,\n                        \"frequency_penalty\": 0,\n                        \"perf_metrics_in_response\": false,\n                        \"presence_penalty\": 0,\n                        \"repetition_penalty\": 1,\n                        \"mirostat_lr\": 0.1,\n                        \"mirostat_target\": 1.5,\n                        \"n\": 1,\n                        \"ignore_eos\": false,\n                        \"response_format\": {\"type\": \"text\"},\n                        \"stream\": false,\n                        \"messages\": [{\"role\": \"user\", \"content\": message}],\n                        \"model\": \"accounts/fireworks/models/qwen3-235b-a22b-thinking-2507\"\n                    })\n                };\n                try {\n                    const response = await fetch(url, options);\n                    const data = await response.json();\n                    // eslint-disable-next-line no-console\n                    console.log(data);\n                    if (data.choices && data.choices[0] && data.choices[0].message) {\n                        let content = data.choices[0].message.content;\n\n                        // Extract content after thinking tags if they exist\n                        const thinkPatterns = ['</think>', '</thinking>'];\n                        for (const pattern of thinkPatterns) {\n                            const endIndex = content.indexOf(pattern);\n                            if (endIndex !== -1) {\n                                content = content.substring(endIndex + pattern.length).trim();\n                                break;\n                            }\n                        }\n                        // Convert markdown to HTML\n                        // eslint-disable-next-line no-undef\n                        const htmlContent = marked.parse(content);\n                        responseSpan.innerHTML = htmlContent;\n                    } else {\n                        responseSpan.textContent = 'Sorry, I could not process your request.';\n                    }\n                } catch (error) {\n                    // eslint-disable-next-line no-console\n                    console.error(error);\n                    responseSpan.textContent = 'Sorry, there was an error processing your request.';\n                }\n\n                // Scroll to bottom\n                messagesContainer.scrollTop = messagesContainer.scrollHeight;\n            }, 1000);\n        }\n\n        sendButton.addEventListener(\"click\", sendMessage);\n\n        chatInput.addEventListener(\"keypress\", function(e) {\n            if (e.key === \"Enter\" && !e.shiftKey) {\n                e.preventDefault();\n                sendMessage();\n            }\n        });\n    };\n\n    // Try to initialize immediately if DOM is ready, otherwise wait for DOMContentLoaded\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', initializeChat);\n    } else {\n        // DOM is already loaded, initialize immediately\n        initializeChat();\n    }\n};"],"mappings":"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","ignoreList":[]}